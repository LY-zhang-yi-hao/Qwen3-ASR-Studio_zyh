# 任务日志 - 2025-02-14

## 背景
- 运行 `pnpm dev` 时 Vite 报错 `ENOSPC: System limit for number of file watchers reached`，导致开发服务器无法启动。
- 目标是通过操作系统级别扩容 inotify watcher 限制来恢复正常监听能力，并验证开发服务器可启动。

## 计划
1. 评估当前 inotify 配额，并使用 `sudo sysctl -w` 动态提升 `fs.inotify.max_user_watches` 与 `fs.inotify.max_user_instances` 等关键参数，必要时写入配置文件以便持久化。
2. 完成扩容后重新执行 `pnpm dev`，确认 Vite 再无 watcher 相关报错，开发服务器能够正常监听文件。

## 预期效果
- inotify 限制提升至至少 524288（watches）与 1024（instances）后不再出现 ENOSPC 报错。
- `pnpm dev` 成功进入监听状态，确保后续开发与部署流程可继续。

## 实施情况
- 2025-02-14：使用 `sudo sysctl -w` 将 `fs.inotify.max_user_watches` 提升至 524288、`fs.inotify.max_user_instances` 提升至 1024，并同步将 `fs.inotify.max_queued_events` 设置为 65536；在 `/etc/sysctl.d/99-qwen3-asr-studio-inotify.conf` 中写入相同配置并执行 `sudo sysctl --system` 以保证持久化，Vite 原先的 ENOSPC 报错已消失。
- 2025-02-14：再次执行 `pnpm dev` 时能够顺利进入构建阶段，但在监听端口 `127.0.0.1:5173` 时收到 `Error: listen EPERM: operation not permitted`，判断为当前受限运行环境的端口权限问题，需在拥有监听权限的环境下再试或改用允许的端口/网络策略。
